(self["webpackChunkc_tool"]=self["webpackChunkc_tool"]||[]).push([[9599],{2398:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Input",{staticClass:"auto-height-textarea",style:e.style,attrs:{type:"textarea",placeholder:e.placeholder},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})},a=[],i=(r(9653),r(92222),r(69600),r(96486)),o=r.n(i),u={name:"autoHeightTextarea",props:{value:{type:[String,Number],default:""},placeholder:{type:String,default:""},height:{type:[String,Number],default:""}},data:function(){return{textarea:""}},computed:{style:function(){var e=[];return this.height&&e.push("height:".concat(this.height).concat(o().isNumber(this.height)?"px":"")),e.join(";")}},watch:{textarea:function(e){e!==this.value&&this.$emit("input",e)},value:function(e){e!==this.textarea&&(this.textarea=e)}},created:function(){this.textarea=this.value}},s=u,l=r(1001),c=(0,l.Z)(s,n,a,!1,null,null,null),d=c.exports},46976:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{style:"height:"+e.height},[e._t("default")],2)},a=[],i=r(62032),o=(r(9653),r(92222),r(57327),r(41539),r(26699),r(32023),r(34809));function u(e){var t=document.querySelector(e);if(null===t)return 0;var r=window.getComputedStyle(t),n=parseFloat(r["marginTop"])+parseFloat(r["marginBottom"]);return Math.ceil(t.offsetHeight+n)}var s={name:"heightResize",props:{append:{type:Array,default:function(){return[]}},reduce:{type:Number,default:0},remove:{type:Array,default:function(){return[]}},ignore:{type:Boolean,default:!1}},data:function(){return{height:"auto"}},methods:{reportWindowSize:function(){var e=this;setTimeout((function(){return e.resize()}),2)},resize:function(){var e,t=this,r=window.innerHeight,n=[".tool-select-block",".tool-category-menu-block",".ctool-bottom"],a=n.filter((function(e){return!t.remove.includes(e)})).concat(this.append),o=(0,i.Z)(a);try{for(o.s();!(e=o.n()).done;){var s=e.value;r-=u(s)}}catch(l){o.e(l)}finally{o.f()}this.reduce>0&&(r-=this.reduce),r>100&&(r-=5),this.ignore||(this.height=r+"px"),this.$emit("resize",r)}},destroyed:function(){window.removeEventListener(o.KU,this.reportWindowSize)},mounted:function(){window.addEventListener(o.KU,this.reportWindowSize),this.resize()}},l=s,c=r(1001),d=(0,c.Z)(l,n,a,!1,null,null,null),p=d.exports},54950:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Upload",{staticStyle:{display:"inline-block"},attrs:{action:"#","before-upload":e.handleUpload,format:e.format,showUploadList:!1}},[r("Button",{attrs:{shape:"circle",icon:"md-cloud-upload"}}),e.disablePaste?e._e():["file"===e.type?r("pasteClipboardFlie",{on:{"on-paste-file":e.handleUpload}}):e._e(),"image"===e.type?r("pasteClipboardFlie",{on:{"on-paste-image":e.handleUpload}}):e._e()]],2)},a=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"inline"}},[e._t("default")],2)},o=[],u={name:"pasteClipboardFlie",methods:{reader:function(e){if("clipboardData"in e){var t=e.clipboardData&&e.clipboardData.items,r=e.clipboardData.types||[];if(t&&t.length)for(var n=0;n<t.length;n++)if("Files"===r[n])return this.$emit("on-paste-file",t[n].getAsFile()),void(-1!==t[n].type.indexOf("image")&&this.$emit("on-paste-image",t[n].getAsFile()))}}},destroyed:function(){window.removeEventListener("paste",this.reader)},mounted:function(){window.addEventListener("paste",this.reader)}},s=u,l=r(1001),c=(0,l.Z)(s,i,o,!1,null,null,null),d=c.exports,p={components:{pasteClipboardFlie:d},props:{disablePaste:{type:Boolean,default:!1},type:{type:String,default:"file"}},computed:{format:function(){return"image"===this.type?["jpg","jpeg","png"]:[]}},methods:{handleUpload:function(e){this.$emit("success",e)}}},h=p,f=(0,l.Z)(h,n,a,!1,null,null,null),g=f.exports},99157:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Tabs",{model:{value:e.current.operation,callback:function(t){e.$set(e.current,"operation",t)},expression:"current.operation"}},[r("TabPane",{attrs:{label:e.$t("qrCode_generate_title"),name:"generate"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{span:"14"}},[r("heightResize",{attrs:{reduce:52}},[r("autoHeightTextarea",{attrs:{placeholder:e.$t("qrCode_generate_input")},model:{value:e.current.generateInput,callback:function(t){e.$set(e.current,"generateInput",t)},expression:"current.generateInput"}})],1)],1),r("Col",{attrs:{span:"10"}},[r("heightResize",{attrs:{reduce:52}},[e.generateOutput?r("div",{staticClass:"tool-qrcode-block"},[e.generateOutput.startsWith("data:")?r("img",{staticStyle:{width:"70%","min-width":"300px",cursor:"pointer"},attrs:{src:e.generateOutput},on:{click:function(){return e.$clipboardCopyImages(e.generateOutput)}}}):r("p",[e._v(e._s(e.generateOutput))])]):e._e()])],1)],1)],1),r("TabPane",{attrs:{label:e.$t("qrCode_reader_title"),name:"reader"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{span:"14"}},[r("input-block",{staticClass:"tool-reader-input",staticStyle:{"margin-bottom":"10px"}},[r("Input",{attrs:{rows:5,type:"textarea",placeholder:e.$t("qrCode_reader_input")},model:{value:e.current.readerInput,callback:function(t){e.$set(e.current,"readerInput",t)},expression:"current.readerInput"}}),r("updateFile",{attrs:{slot:"extra",type:"image"},on:{success:e.handleUpload},slot:"extra"})],1),r("heightResize",{attrs:{reduce:52,append:[".tool-reader-input"]}},[r("autoHeightTextarea",{attrs:{value:e.readerOutput,placeholder:e.$t("qrCode_reader_output")}})],1)],1),r("Col",{attrs:{span:"10"}},[r("heightResize",{attrs:{reduce:52}},[r("div",{staticClass:"tool-qrcode-block",domProps:{innerHTML:e._s(e.readerInputImg)}})])],1)],1)],1)],1)],1)},a=[],i=(r(41539),r(21703),r(39714),r(92592)),o=r(1713),u=r.n(o),s=r(89814),l=r(75817),c=r(54950),d=r(46976),p=r(2398),h={components:{updateFile:c.Z,heightResize:d.Z,autoHeightTextarea:p.Z},computed:{readerInputImg:function(){return this.current.readerInput?'<img style="width:70%;min-width:300px;" src="'.concat(this.current.readerInput,'" />'):""}},watch:{"current.generateInput":function(){this.generate()},"current.readerInput":function(){this.reader()}},created:function(){var e=s.Z.getToolCurrentFeature("generate");"generate"===e?(this.current.operation=e,this.$initToolData("generateInput")):"reader"===e?(this.current.operation=e,this.$initToolData("readerInput")):this.$initToolData()},methods:{generate:function(){var e=this;this.current.generateInput?i.toDataURL(this.current.generateInput,(function(t,r){t?e.generateOutput=e.$t("qrCode_generate_error",[t]):(e.generateOutput=r,e.$saveToolData(e.current))})):this.generateOutput=""},reader:function(){var e=this;this.current.readerInput?this.getReaderImagePngBase64(this.current.readerInput).then((function(t){e.readerOutput=t,e.$saveToolData(e.current)})).catch((function(t){e.readerOutput=e.$t("qrCode_reader_error",[t.message])})):this.readerOutput=""},getReaderImagePngBase64:function(e){var t=this;return new Promise((function(r,n){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){if(a.status>=200&&a.status<300){var e=a.response,i=new FileReader;i.readAsArrayBuffer(e),i.addEventListener("loadend",(function(e){var t=e.target.result;try{l.Z.read(t,(function(e,t){if(e)return n(e);t.getBase64Async("image/png").then((function(e){return u()(e)})).then((function(e){r(e.data)})).catch((function(e){n(e)}))}))}catch(e){n(e)}}))}else n(new Error(t.$t("qrCode_reader_parsing_failure").toString()))},a.onerror=function(){return n(new Error(t.$t("qrCode_reader_parsing_failure").toString()))},a.send()}))},handleUpload:function(e){var t=this;if("reader"===this.current.operation){var r=new FileReader;return r.readAsDataURL(e),r.onloadend=function(){t.current.readerInput=r.result},!1}}},data:function(){return{readerOutput:"",generateOutput:"",current:{generateInput:"",readerInput:"",operation:"generate"}}}},f=h,g=r(1001),m=(0,g.Z)(f,n,a,!1,null,null,null),v=m.exports},92987:function(){},18104:function(){},73731:function(){},52361:function(){},94616:function(){}}]);